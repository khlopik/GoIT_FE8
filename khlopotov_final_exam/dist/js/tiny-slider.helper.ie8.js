"use strict";Object.keys||(Object.keys=function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}),Array.isArray||(Array.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)}),Array.prototype.forEach||(Array.prototype.forEach=function(e,t){for(var n=this.length>>>0,r=0;r<n;r++)r in this&&e.call(t,this[r],r,this)}),function(){if(!Element.prototype.addEventListener){var e=[],t=function(t,n){var r=this,o=function(e){e.target=e.srcElement,e.currentTarget=r,void 0!==n.handleEvent?n.handleEvent(e):n.call(r,e)};if("DOMContentLoaded"==t){var i=function(e){"complete"==document.readyState&&o(e)};if(document.attachEvent("onreadystatechange",i),e.push({object:this,type:t,listener:n,wrapper:i}),"complete"==document.readyState){var l=new Event;l.srcElement=window,i(l)}}else this.attachEvent("on"+t,o),e.push({object:this,type:t,listener:n,wrapper:o})},n=function(t,n){for(var r=0;r<e.length;){var o=e[r];if(o.object==this&&o.type==t&&o.listener==n){"DOMContentLoaded"==t?this.detachEvent("onreadystatechange",o.wrapper):this.detachEvent("on"+t,o.wrapper),e.splice(r,1);break}++r}};Element.prototype.addEventListener=t,Element.prototype.removeEventListener=n,HTMLDocument&&(HTMLDocument.prototype.addEventListener=t,HTMLDocument.prototype.removeEventListener=n),Window&&(Window.prototype.addEventListener=t,Window.prototype.removeEventListener=n)}}(),function(){"firstElementChild"in document.documentElement||Object.defineProperty(Element.prototype,"firstElementChild",{get:function(){for(var e,t=this.children,n=0,r=t.length;n<r;++n)if(e=t[n],1===e.nodeType)return e;return null}})}(),function(){"lastElementChild"in document.documentElement||Object.defineProperty(Element.prototype,"lastElementChild",{get:function(){for(var e,t=this.children,n=t.length-1;n>=0;--n)if(e=t[n],1===e.nodeType)return e;return null}})}(),function(){"previousElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"previousElementSibling",{get:function(){for(var e=this.previousSibling;e&&1!==e.nodeType;)e=e.previousSibling;return e}})}(),function(){"nextElementSibling"in document.documentElement||Object.defineProperty(Element.prototype,"nextElementSibling",{get:function(){for(var e=this.nextSibling;e&&1!==e.nodeType;)e=e.nextSibling;return e}})}(),function(){window.getComputedStyle||(window.getComputedStyle=function(e){if(!e)return null;var t=e.currentStyle,n=e.getBoundingClientRect(),r=document.createElement("div"),o=r.style;for(var i in t)o[i]=t[i];return o.cssFloat=o.styleFloat,"auto"===o.width&&(o.width=n.right-n.left+"px"),"auto"===o.height&&(o.height=n.bottom-n.top+"px"),o})}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRpbnktc2xpZGVyLmhlbHBlci5pZTguanMiXSwibmFtZXMiOlsiT2JqZWN0Iiwia2V5cyIsIm9iamVjdCIsIm5hbWUiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsImNhbGwiLCJBcnJheSIsImlzQXJyYXkiLCJvYmoiLCJ0b1N0cmluZyIsImZvckVhY2giLCJibG9jayIsInRoaXNPYmplY3QiLCJpIiwibGVuIiwidGhpcyIsIkVsZW1lbnQiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnRMaXN0ZW5lcnMiLCJ0eXBlIiwibGlzdGVuZXIiLCJzZWxmIiwiZSIsInNyY0VsZW1lbnQiLCJ3cmFwcGVyIiwiY3VycmVudFRhcmdldCIsImhhbmRsZUV2ZW50Iiwid3JhcHBlcjIiLCJyZWFkeVN0YXRlIiwiZG9jdW1lbnQiLCJhdHRhY2hFdmVudCIsInB1c2giLCJFdmVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJjb3VudGVyIiwibGVuZ3RoIiwiZXZlbnRMaXN0ZW5lciIsImRldGFjaEV2ZW50IiwiSFRNTERvY3VtZW50IiwiV2luZG93IiwiZG9jdW1lbnRFbGVtZW50IiwiZGVmaW5lUHJvcGVydHkiLCJnZXQiLCJsIiwibm9kZXMiLCJuIiwibm9kZVR5cGUiLCJjaGlsZHJlbiIsInByZXZpb3VzU2libGluZyIsIm5leHRTaWJsaW5nIiwid2luZG93IiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImVsIiwic3R5bGUiLCJjdXJyZW50U3R5bGUiLCJib3giLCJnZXRCb3VuZGluZ0NsaWVudFJlY3QiLCJzaGFkb3ciLCJjcmVhdGVFbGVtZW50Iiwib3V0cHV0Iiwid2lkdGgiLCJyaWdodCIsImxlZnQiLCJoZWlnaHQiLCJib3R0b20iLCJ0b3AiXSwibWFwcGluZ3MiOiJZQUNLQSxRQUFPQyxPQURaRCxPQUFBQyxLQUFBLFNBQUFDLEdBQ0tGLEdBQU9DLEtBQ1JELEtBQUEsR0FBY0csS0FBQUQsR0FDQ0YsT0FBWEksVUFBQUMsZUFBQUMsS0FBQUosRUFBQUMsSUFD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QWIsVUFBQSwwQkFPTXVDLElBQUssV0FKVCxJQURELEdBQUFwQixHQUFZUCxLQUFBaUMsZ0JBQ1gxQixHQUFBLElBQUFBLEVBQUF3QixVQU9ReEIsRUFBSUEsRUFBRTBCLGVBSlpqRCxPQUFPMEMsU0FBNEQsV0FpQi9ELHNCQUF3QlosVUFBU1csaUJBTHpDekMsT0FBQTBDLGVBQUF6QixRQUFBYixVQUFBLHNCQU9NdUMsSUFBSyxXQUpULElBREQsR0FBQXBCLEdBQVlQLEtBQUFrQyxZQUNYM0IsR0FBQSxJQUFBQSxFQUFBd0IsVUFPUXhCLEVBQUlBLEVBQUUyQixXQUpabEQsT0FBTzBDLFNBQXdELFdBaUI3RFMsT0FBT0MsbUJBTGJELE9BQUFDLGlCQUFBLFNBQUFDLEdBT00sSUFBSUEsRUFBTSxNQUFPLEtBaUJqQixJQUFJQyxHQUFVRCxFQUFHRSxhQUNiQyxFQUFVSCxFQUFHSSx3QkFDYkMsRUFBVTVCLFNBQVM2QixjQUFjLE9BQ2pDQyxFQUFVRixFQUFPSixLQUNyQixLQUFJLEdBQUl4QyxLQUFLd0MsR0FDWE0sRUFBTzlDLEdBQUt3QyxFQUFNeEMsRUFEcEIsT0FIQThDLEdBQUlKLFNBQWFDLEVBQUFBLFdBQ2pCLFNBQWMzQixFQUFBQSxRQUFTNkIsRUFBY0UsTUFBckNMLEVBQUFNLE1BQUFOLEVBQUFPLEtBQUEsTUFDQSxTQUFjTCxFQUFPSixTQUFyQk0sRUFBQUksT0FBQVIsRUFBQVMsT0FBQVQsRUFBQVUsSUFBQSxNQUNJTiIsImZpbGUiOiJ0aW55LXNsaWRlci5oZWxwZXIuaWU4LmpzIiwic291cmNlc0NvbnRlbnQiOlsiLy8ga2V5c1xuaWYgKCFPYmplY3Qua2V5cykge1xuICAgIE9iamVjdC5rZXlzID0gZnVuY3Rpb24gKG9iamVjdCkge1xuICAgICAgICB2YXIga2V5cyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBuYW1lIGluIG9iamVjdCkge1xuICAgICAgICAgICAgaWYgKE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIG5hbWUpKSB7XG4gICAgICAgICAgICAgICAga2V5cy5wdXNoKG5hbWUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBrZXlzO1xuICAgIH07XG59XG5cbi8vIEFycmF5LmlzQXJyYXlcbmlmICghQXJyYXkuaXNBcnJheSkge1xuICAgIEFycmF5LmlzQXJyYXkgPSBmdW5jdGlvbihvYmopIHtcbiAgICAgICAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09IFwiW29iamVjdCBBcnJheV1cIjtcbiAgICB9O1xufVxuXG4vLyBmb3JFYWNoXG5cbmlmICghQXJyYXkucHJvdG90eXBlLmZvckVhY2gpIHtcbiAgQXJyYXkucHJvdG90eXBlLmZvckVhY2ggPSAgZnVuY3Rpb24oYmxvY2ssIHRoaXNPYmplY3QpIHtcbiAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGggPj4+IDA7XG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkrKykge1xuICAgICAgaWYgKGkgaW4gdGhpcykge1xuICAgICAgICBibG9jay5jYWxsKHRoaXNPYmplY3QsIHRoaXNbaV0sIGksIHRoaXMpO1xuICAgICAgfVxuICAgIH1cbiAgfTtcbn1cblxuLy8gYWRkRXZlbnRMaXN0ZW5lclxuLy8gcmVtb3ZlRXZlbnRMaXN0ZW5lclxuLy8gaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvQVBJL0V2ZW50VGFyZ2V0L2FkZEV2ZW50TGlzdGVuZXI/cmVkaXJlY3Rsb2NhbGU9ZW4tVVMmcmVkaXJlY3RzbHVnPURPTSUyRkV2ZW50VGFyZ2V0LmFkZEV2ZW50TGlzdGVuZXIjQ29tcGF0aWJpbGl0eVxuXG4oZnVuY3Rpb24oKSB7XG4gIGlmICghRWxlbWVudC5wcm90b3R5cGUuYWRkRXZlbnRMaXN0ZW5lcikge1xuICAgIHZhciBldmVudExpc3RlbmVycz1bXTtcbiAgICBcbiAgICB2YXIgYWRkRXZlbnRMaXN0ZW5lcj1mdW5jdGlvbih0eXBlLGxpc3RlbmVyIC8qLCB1c2VDYXB0dXJlICh3aWxsIGJlIGlnbm9yZWQpICovKSB7XG4gICAgICB2YXIgc2VsZj10aGlzO1xuICAgICAgdmFyIHdyYXBwZXI9ZnVuY3Rpb24oZSkge1xuICAgICAgICBlLnRhcmdldD1lLnNyY0VsZW1lbnQ7XG4gICAgICAgIGUuY3VycmVudFRhcmdldD1zZWxmO1xuICAgICAgICBpZiAodHlwZW9mIGxpc3RlbmVyLmhhbmRsZUV2ZW50ICE9IFwidW5kZWZpbmVkXCIpIHtcbiAgICAgICAgICBsaXN0ZW5lci5oYW5kbGVFdmVudChlKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBsaXN0ZW5lci5jYWxsKHNlbGYsZSk7XG4gICAgICAgIH1cbiAgICAgIH07XG4gICAgICBpZiAodHlwZT09XCJET01Db250ZW50TG9hZGVkXCIpIHtcbiAgICAgICAgdmFyIHdyYXBwZXIyPWZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZT09XCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgICB3cmFwcGVyKGUpO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICAgICAgZG9jdW1lbnQuYXR0YWNoRXZlbnQoXCJvbnJlYWR5c3RhdGVjaGFuZ2VcIix3cmFwcGVyMik7XG4gICAgICAgIGV2ZW50TGlzdGVuZXJzLnB1c2goe29iamVjdDp0aGlzLHR5cGU6dHlwZSxsaXN0ZW5lcjpsaXN0ZW5lcix3cmFwcGVyOndyYXBwZXIyfSk7XG4gICAgICAgIFxuICAgICAgICBpZiAoZG9jdW1lbnQucmVhZHlTdGF0ZT09XCJjb21wbGV0ZVwiKSB7XG4gICAgICAgICAgdmFyIGU9bmV3IEV2ZW50KCk7XG4gICAgICAgICAgZS5zcmNFbGVtZW50PXdpbmRvdztcbiAgICAgICAgICB3cmFwcGVyMihlKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5hdHRhY2hFdmVudChcIm9uXCIrdHlwZSx3cmFwcGVyKTtcbiAgICAgICAgZXZlbnRMaXN0ZW5lcnMucHVzaCh7b2JqZWN0OnRoaXMsdHlwZTp0eXBlLGxpc3RlbmVyOmxpc3RlbmVyLHdyYXBwZXI6d3JhcHBlcn0pO1xuICAgICAgfVxuICAgIH07XG4gICAgdmFyIHJlbW92ZUV2ZW50TGlzdGVuZXI9ZnVuY3Rpb24odHlwZSxsaXN0ZW5lciAvKiwgdXNlQ2FwdHVyZSAod2lsbCBiZSBpZ25vcmVkKSAqLykge1xuICAgICAgdmFyIGNvdW50ZXI9MDtcbiAgICAgIHdoaWxlIChjb3VudGVyPGV2ZW50TGlzdGVuZXJzLmxlbmd0aCkge1xuICAgICAgICB2YXIgZXZlbnRMaXN0ZW5lcj1ldmVudExpc3RlbmVyc1tjb3VudGVyXTtcbiAgICAgICAgaWYgKGV2ZW50TGlzdGVuZXIub2JqZWN0PT10aGlzICYmIGV2ZW50TGlzdGVuZXIudHlwZT09dHlwZSAmJiBldmVudExpc3RlbmVyLmxpc3RlbmVyPT1saXN0ZW5lcikge1xuICAgICAgICAgIGlmICh0eXBlPT1cIkRPTUNvbnRlbnRMb2FkZWRcIikge1xuICAgICAgICAgICAgdGhpcy5kZXRhY2hFdmVudChcIm9ucmVhZHlzdGF0ZWNoYW5nZVwiLGV2ZW50TGlzdGVuZXIud3JhcHBlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuZGV0YWNoRXZlbnQoXCJvblwiK3R5cGUsZXZlbnRMaXN0ZW5lci53cmFwcGVyKTtcbiAgICAgICAgICB9XG4gICAgICAgICAgZXZlbnRMaXN0ZW5lcnMuc3BsaWNlKGNvdW50ZXIsIDEpO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICAgICsrY291bnRlcjtcbiAgICAgIH1cbiAgICB9O1xuICAgIEVsZW1lbnQucHJvdG90eXBlLmFkZEV2ZW50TGlzdGVuZXI9YWRkRXZlbnRMaXN0ZW5lcjtcbiAgICBFbGVtZW50LnByb3RvdHlwZS5yZW1vdmVFdmVudExpc3RlbmVyPXJlbW92ZUV2ZW50TGlzdGVuZXI7XG4gICAgaWYgKEhUTUxEb2N1bWVudCkge1xuICAgICAgSFRNTERvY3VtZW50LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWFkZEV2ZW50TGlzdGVuZXI7XG4gICAgICBIVE1MRG9jdW1lbnQucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9cmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG4gICAgaWYgKFdpbmRvdykge1xuICAgICAgV2luZG93LnByb3RvdHlwZS5hZGRFdmVudExpc3RlbmVyPWFkZEV2ZW50TGlzdGVuZXI7XG4gICAgICBXaW5kb3cucHJvdG90eXBlLnJlbW92ZUV2ZW50TGlzdGVuZXI9cmVtb3ZlRXZlbnRMaXN0ZW5lcjtcbiAgICB9XG4gIH1cbn0pKCk7XG5cbi8vIEVsZW1lbnQuZmlyc3RFbGVtZW50Q2hpbGRcblxuKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKCEoXCJmaXJzdEVsZW1lbnRDaGlsZFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIFwiZmlyc3RFbGVtZW50Q2hpbGRcIiwge1xuICAgICAgZ2V0OiBmdW5jdGlvbigpe1xuICAgICAgICBmb3IodmFyIG5vZGVzID0gdGhpcy5jaGlsZHJlbiwgbiwgaSA9IDAsIGwgPSBub2Rlcy5sZW5ndGg7IGkgPCBsOyArK2kpIHtcbiAgICAgICAgICBpZihuID0gbm9kZXNbaV0sIDEgPT09IG4ubm9kZVR5cGUpIHsgcmV0dXJuIG47IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTtcblxuLy8gRWxlbWVudC5sYXN0RWxlbWVudENoaWxkXG5cbihmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGlmICghKFwibGFzdEVsZW1lbnRDaGlsZFwiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIFwibGFzdEVsZW1lbnRDaGlsZFwiLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIGZvcih2YXIgbm9kZXMgPSB0aGlzLmNoaWxkcmVuLCBuLCBpID0gbm9kZXMubGVuZ3RoIC0gMTsgaSA+PSAwOyAtLWkpIHtcbiAgICAgICAgICBpZihuID0gbm9kZXNbaV0sIDEgPT09IG4ubm9kZVR5cGUpIHsgcmV0dXJuIG47IH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTtcblxuLy8gRWxlbWVudC5wcmV2aW91c0VsZW1lbnRTaWJsaW5nXG5cbihmdW5jdGlvbiAoKSB7XG4gIFwidXNlIHN0cmljdFwiO1xuXG4gIGlmICghKFwicHJldmlvdXNFbGVtZW50U2libGluZ1wiIGluIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudCkpIHtcbiAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoRWxlbWVudC5wcm90b3R5cGUsIFwicHJldmlvdXNFbGVtZW50U2libGluZ1wiLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBlID0gdGhpcy5wcmV2aW91c1NpYmxpbmc7XG4gICAgICAgIHdoaWxlKGUgJiYgMSAhPT0gZS5ub2RlVHlwZSkge1xuICAgICAgICAgIGUgPSBlLnByZXZpb3VzU2libGluZztcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufSkoKTtcblxuLy8gRWxlbWVudC5uZXh0RWxlbWVudFNpYmxpbmdcblxuKGZ1bmN0aW9uICgpIHtcbiAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgaWYgKCEoXCJuZXh0RWxlbWVudFNpYmxpbmdcIiBpbiBkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQpKSB7XG4gICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KEVsZW1lbnQucHJvdG90eXBlLCBcIm5leHRFbGVtZW50U2libGluZ1wiLCB7XG4gICAgICBnZXQ6IGZ1bmN0aW9uKCl7XG4gICAgICAgIHZhciBlID0gdGhpcy5uZXh0U2libGluZztcbiAgICAgICAgd2hpbGUoZSAmJiAxICE9PSBlLm5vZGVUeXBlKSB7XG4gICAgICAgICAgZSA9IGUubmV4dFNpYmxpbmc7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGU7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cbn0pKCk7XG5cbi8vIGdldENvbXB1dGVkU3R5bGVcblxuKGZ1bmN0aW9uKCl7XG4gIFwidXNlIHN0cmljdFwiO1xuICBcbiAgaWYoIXdpbmRvdy5nZXRDb21wdXRlZFN0eWxlKXtcbiAgICB3aW5kb3cuZ2V0Q29tcHV0ZWRTdHlsZSA9IGZ1bmN0aW9uKGVsKXtcbiAgICAgIGlmKCFlbCkgeyByZXR1cm4gbnVsbDsgfVxuICAgICAgXG4gICAgICAvKipcbiAgICAgICAqIGN1cnJlbnRTdHlsZSByZXR1cm5zIGFuIGluc3RhbmNlIG9mIGEgbm9uLXN0YW5kYXJkIGNsYXNzIGNhbGxlZCBcIkNTU0N1cnJlbnRTdHlsZURlY2xhcmF0aW9uXCJcbiAgICAgICAqIGluc3RlYWQgb2YgXCJDU1NTdHlsZURlY2xhcmF0aW9uXCIsIHdoaWNoIGhhcyBhIGZldyBtZXRob2RzIGFuZCBwcm9wZXJ0aWVzIG1pc3NpbmcgKHN1Y2ggYXMgY3NzVGV4dCkuXG4gICAgICAgKiBodHRwczovL21zZG4ubWljcm9zb2Z0LmNvbS9lbi11cy9saWJyYXJ5L2NjODQ4OTQxKHY9dnMuODUpLmFzcHhcbiAgICAgICAqXG4gICAgICAgKiBJbnN0ZWFkIG9mIHJldHVybmluZyB0aGUgY3VycmVudFN0eWxlIHZhbHVlIGRpcmVjdGx5LCB3ZSdsbCBjb3B5IGl0cyBwcm9wZXJ0aWVzIHRvIHRoZSBzdHlsZVxuICAgICAgICogb2YgYSBzaGFkb3cgZWxlbWVudC4gVGhpcyBlbnN1cmVzIGNzc1RleHQgaXMgaW5jbHVkZWQsIGFuZCBlbnN1cmVzIHRoZSByZXN1bHQgaXMgYW4gaW5zdGFuY2Ugb2ZcbiAgICAgICAqIHRoZSBjb3JyZWN0IERPTSBpbnRlcmZhY2UuXG4gICAgICAgKlxuICAgICAgICogVGhlcmUnbGwgc3RpbGwgYmUgc29tZSBtaW5vciBkaXNjcmVwYW5jaWVzIGluIHRoZSBzdHlsZSB2YWx1ZXMuIEZvciBleGFtcGxlLCBJRSBwcmVzZXJ2ZXMgdGhlIHdheVxuICAgICAgICogY29sb3VyIHZhbHVlcyB3ZXJlIGF1dGhvcmVkLCB3aGVyZWFzIHN0YW5kYXJkcy1jb21wbGlhbnQgYnJvd3NlcnMgd2lsbCBleHBhbmQgY29sb3VycyB0byB1c2UgXCJyZ2IoKVwiXG4gICAgICAgKiBub3RhdGlvbi4gV2Ugd29uJ3QgYm90aGVyIHRvIGZpeCB0aGluZ3MgbGlrZSB0aGVzZSwgYXMgdGhleSdkIGludm9sdmUgdG9vIG11Y2ggZmlkZGxpbmcgZm9yIGxpdHRsZVxuICAgICAgICogZ2Fpbi5cbiAgICAgICAqL1xuICAgICAgXG4gICAgICB2YXIgc3R5bGUgICA9IGVsLmN1cnJlbnRTdHlsZTtcbiAgICAgIHZhciBib3ggICAgID0gZWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XG4gICAgICB2YXIgc2hhZG93ICA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4gICAgICB2YXIgb3V0cHV0ICA9IHNoYWRvdy5zdHlsZTtcbiAgICAgIGZvcih2YXIgaSBpbiBzdHlsZSkge1xuICAgICAgICBvdXRwdXRbaV0gPSBzdHlsZVtpXTtcbiAgICAgIH1cbiAgICAgIFxuICAgICAgLyoqIEZpeCBzb21lIGdsaXRjaGVzICovXG4gICAgICBvdXRwdXQuY3NzRmxvYXQgPSBvdXRwdXQuc3R5bGVGbG9hdDtcbiAgICAgIGlmKFwiYXV0b1wiID09PSBvdXRwdXQud2lkdGgpIHsgb3V0cHV0LndpZHRoICA9IChib3gucmlnaHQgLSBib3gubGVmdCkgKyBcInB4XCI7IH1cbiAgICAgIGlmKFwiYXV0b1wiID09PSBvdXRwdXQuaGVpZ2h0KSB7IG91dHB1dC5oZWlnaHQgPSAoYm94LmJvdHRvbSAtIGJveC50b3ApICsgXCJweFwiOyB9XG4gICAgICByZXR1cm4gb3V0cHV0O1xuICAgIH07XG4gIH0gXG59KSgpOyJdfQ==
